#  Dubbo





## 说一说Dubbo的大概架构



消费者， 注册中心，监控中心，生产者，容器。





## 分布式服务接口的幂等性如何设计



1. 在操作数据库前判断数据是否存在。
2. 将操作唯一标示的id存到redis中，并设置过期时间，每次调用服务时先检查redis中是否有这个id，有就不调用。







## 如何自己设计一个类似dubbo的rpc框架 



1. dubbo有个注册中心，服务提供方用Spring的ioc容器注册服务的实现类，被注册到注册中心中，可以用redis，zookeeper实现，也可以自己弄个Map实现2.给服务接口生产代理类调用服务的方法。
2. 服务调用者用动态代理来调用暴露的接口，用netty来进行数据的序列化和 建立远程连接和调用远程模块的方法。
3. 服务提供方代理用netty来监听连接，从ioc容器中获取调用的接口的实体类，然后反射调用方法。
4. 服务调用方也用netty来监听获取返回结果。